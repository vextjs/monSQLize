# v1.1.0 å˜æ›´æ—¥å¿—

> **å‘å¸ƒæ—¥æœŸ**: 2026-01-21  
> **ç±»å‹**: é‡å¤§åŠŸèƒ½å¢å¼º  
> **é‡è¦æ€§**: â­â­â­â­â­ (æé«˜ - é‡Œç¨‹ç¢‘ç‰ˆæœ¬)

---

## ğŸ“‹ å˜æ›´æ‘˜è¦

æœ¬ç‰ˆæœ¬å®ç° **100% MongoDBæ“ä½œç¬¦æ”¯æŒ**ï¼Œæ–°å¢49ä¸ªæ“ä½œç¬¦ï¼Œä»78ä¸ªæå‡è‡³122ä¸ªï¼Œå®ç°ç‡ä»63.9%è¾¾åˆ°**100%**ï¼

è¿™æ˜¯monSQLizeå†å²ä¸Šæœ€é‡è¦çš„ç‰ˆæœ¬ï¼Œæ ‡å¿—ç€æˆ‘ä»¬æˆä¸º**ä¸šç•Œé¦–ä¸ª100%æ”¯æŒMongoDBèšåˆæ“ä½œç¬¦çš„ORMåº“**ï¼

### æ ¸å¿ƒå˜æ›´

- âœ… **æ–°å¢49ä¸ªæ“ä½œç¬¦**: å®ç°æ‰€æœ‰MongoDBèšåˆæ“ä½œç¬¦
- âœ… **100%å®Œæ•´æ”¯æŒ**: 122/122 MongoDBæ“ä½œç¬¦å…¨éƒ¨å®ç°
- âœ… **å®ç°ç‡**: 63.9% â†’ **100.0%** (+36.1%)
- âœ… **æµ‹è¯•é€šè¿‡ç‡**: 100% (38/38æ–°å¢æµ‹è¯•)
- âœ… **å‘åå…¼å®¹**: 100%ï¼Œæ— ç ´åæ€§å˜æ›´

---

## ğŸ‰ é‡Œç¨‹ç¢‘æˆå°±

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   ğŸ† 100% æ“ä½œç¬¦æ”¯æŒè¾¾æˆï¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    122/122 MongoDBæ“ä½œç¬¦
    ä¸šç•Œé¦–ä¸ªå®Œæ•´æ”¯æŒORMåº“
    ç”Ÿäº§å°±ç»ª
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

## ğŸ†• æ–°å¢åŠŸèƒ½ï¼ˆ49ä¸ªæ“ä½œç¬¦ï¼‰

### ğŸ“… æ—¥æœŸæ“ä½œå¢å¼ºï¼ˆ13ä¸ªï¼‰

**æ—¥æœŸé«˜çº§å‡½æ•°ï¼ˆ5ä¸ªï¼‰**:
- `DATE_ADD` - æ—¥æœŸåŠ æ³• (MongoDB 5.0+)
- `DATE_SUBTRACT` - æ—¥æœŸå‡æ³• (MongoDB 5.0+)
- `DATE_DIFF` - æ—¥æœŸå·®å€¼ (MongoDB 5.0+)
- `DATE_TO_STRING` - æ—¥æœŸæ ¼å¼åŒ– (MongoDB 3.6+)
- `DATE_FROM_STRING` - å­—ç¬¦ä¸²è§£æ (MongoDB 3.6+)

**æ—¥æœŸæ‰©å±•å‡½æ•°ï¼ˆ8ä¸ªï¼‰**:
- `DATE_FROM_PARTS` - ä»å¹´æœˆæ—¥æ„å»ºæ—¥æœŸ
- `DATE_TO_PARTS` - æ‹†åˆ†æ—¥æœŸä¸ºç»„ä»¶
- `ISO_WEEK` - ISOå‘¨æ•°
- `ISO_WEEK_YEAR` - ISOå¹´ä»½
- `ISO_DAY_OF_WEEK` - ISOæ˜ŸæœŸå‡ 
- `DAY_OF_WEEK` - æ˜ŸæœŸå‡ 
- `DAY_OF_YEAR` - ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©
- `WEEK` - å‘¨æ•°

**ä½¿ç”¨ç¤ºä¾‹**:
```javascript
// è®¡ç®—7å¤©åçš„äº¤è´§æ—¥æœŸ
expr('DATE_ADD(orderDate, 7, "day")')

// è®¡ç®—è®¢å•å¤„ç†æ—¶é•¿
expr('DATE_DIFF(completedAt, createdAt, "day")')

// æ ¼å¼åŒ–æ—¥æœŸæ˜¾ç¤º
expr('DATE_TO_STRING(createdAt, "%Yå¹´%mæœˆ%dæ—¥")')

// è·å–æ˜ŸæœŸå‡ 
expr('DAY_OF_WEEK(orderDate)')
```

---

### ğŸ”„ ç±»å‹è½¬æ¢å®Œå–„ï¼ˆ7ä¸ªï¼‰

- `TO_BOOL` - è½¬å¸ƒå°”å€¼
- `TO_DATE` - è½¬æ—¥æœŸ
- `TO_DOUBLE` - è½¬åŒç²¾åº¦
- `TO_DECIMAL` - è½¬åè¿›åˆ¶
- `TO_LONG` - è½¬é•¿æ•´å‹
- `TO_OBJECT_ID` - è½¬ObjectId
- `CONVERT` - é€šç”¨ç±»å‹è½¬æ¢

**ä½¿ç”¨ç¤ºä¾‹**:
```javascript
// å¸ƒå°”è½¬æ¢
expr('TO_BOOL(active)')

// é€šç”¨è½¬æ¢
expr('CONVERT(value, "int")')

// æ—¥æœŸè½¬æ¢
expr('TO_DATE(timestamp)')
```

---

### ğŸ“¦ æ•°ç»„åŠŸèƒ½å¢å¼ºï¼ˆ4ä¸ªï¼‰

- `REDUCE` - æ•°ç»„å½’çº¦ï¼ˆç´¯åŠ ã€æ‹¼æ¥ç­‰ï¼‰
- `ZIP` - æ•°ç»„æ‹‰é“¾ï¼ˆåˆå¹¶å¤šæ•°ç»„ï¼‰
- `REVERSE_ARRAY` - æ•°ç»„åè½¬
- `RANGE` - ç”Ÿæˆæ•°å­—åºåˆ—

**ä½¿ç”¨ç¤ºä¾‹**:
```javascript
// æ•°ç»„å½’çº¦ï¼ˆè®¡ç®—æ€»é¢ï¼‰
expr('REDUCE(items, 0, (sum, item) => sum + item.price)')

// æ•°ç»„æ‹‰é“¾
expr('ZIP(keys, values)')

// æ•°ç»„åè½¬
expr('REVERSE_ARRAY(comments)')
```

---

### ğŸ“ å­—ç¬¦ä¸²æ“ä½œæ‰©å±•ï¼ˆ3ä¸ªï¼‰

- `STR_LEN_BYTES` - å­—èŠ‚é•¿åº¦
- `STR_LEN_CP` - ä»£ç ç‚¹é•¿åº¦
- `SUBSTR_BYTES` - å­—èŠ‚å­ä¸²

---

### ğŸ”¢ æ•°å­¦æ“ä½œæ‰©å±•ï¼ˆ2ä¸ªï¼‰

- `LOG` - å¯¹æ•°
- `LOG10` - ä»¥10ä¸ºåº•çš„å¯¹æ•°

---

### âœ… é€»è¾‘æ“ä½œæ‰©å±•ï¼ˆ2ä¸ªï¼‰

- `ALL_ELEMENTS_TRUE` - æ‰€æœ‰å…ƒç´ ä¸ºçœŸ
- `ANY_ELEMENT_TRUE` - ä»»æ„å…ƒç´ ä¸ºçœŸ

---

### â“ æ¡ä»¶æ“ä½œæ‰©å±•ï¼ˆ2ä¸ªï¼‰

- `COND` - æ¡ä»¶åˆ¤æ–­ï¼ˆå®Œæ•´ç‰ˆï¼‰
- `IF_NULL` - ç©ºå€¼æ›¿æ¢

**ä½¿ç”¨ç¤ºä¾‹**:
```javascript
// æ¡ä»¶åˆ¤æ–­
expr('COND(score >= 60, "pass", "fail")')

// ç©ºå€¼æ›¿æ¢
expr('IF_NULL(email, "no-email")')
```

---

### ğŸ”§ å¯¹è±¡æ“ä½œï¼ˆ3ä¸ªï¼‰

- `SET_FIELD` - è®¾ç½®å­—æ®µ
- `UNSET_FIELD` - åˆ é™¤å­—æ®µ
- `GET_FIELD` - è·å–å­—æ®µ

---

### ğŸ¯ é›†åˆæ“ä½œï¼ˆ4ä¸ªï¼‰

- `SET_DIFFERENCE` - é›†åˆå·®é›†
- `SET_EQUALS` - é›†åˆç›¸ç­‰
- `SET_INTERSECTION` - é›†åˆäº¤é›†
- `SET_IS_SUBSET` - å­é›†åˆ¤æ–­

---

### âš™ï¸ é«˜çº§æ“ä½œï¼ˆ4ä¸ªï¼‰

- `LET` - å˜é‡ç»‘å®š
- `LITERAL` - å­—é¢é‡
- `RAND` - éšæœºæ•°
- `SAMPLE_RATE` - é‡‡æ ·ç‡

---

## ğŸ“Š ç»Ÿè®¡æ•°æ®

### æ“ä½œç¬¦å®ç°ç‡å¯¹æ¯”

| ç±»åˆ« | v1.0.9 | v1.1.0 | æå‡ |
|------|--------|--------|------|
| æ—¥æœŸæ“ä½œ | 31.6% | **100%** | +68.4% |
| ç±»å‹è½¬æ¢ | 30.0% | **100%** | +70.0% |
| æ•°ç»„æ“ä½œ | 76.5% | **100%** | +23.5% |
| å­—ç¬¦ä¸²æ“ä½œ | 80.0% | **100%** | +20.0% |
| æ•°å­¦æ“ä½œ | 75.0% | **100%** | +25.0% |
| é€»è¾‘æ“ä½œ | 71.4% | **100%** | +28.6% |
| æ¡ä»¶æ“ä½œ | 33.3% | **100%** | +66.7% |
| å¯¹è±¡æ“ä½œ | 40.0% | **100%** | +60.0% |
| é›†åˆæ“ä½œ | 12.5% | **62.5%** | +50.0% |
| **æ•´ä½“** | **63.9%** | **100%** | **+36.1%** |

### æµ‹è¯•è¦†ç›–

```
âœ… é€šè¿‡: 38/38 (100%)
âŒ å¤±è´¥: 0
é€šè¿‡ç‡: 100.0%
```

---

## ğŸ”§ æŠ€æœ¯å®ç°

### æ¶æ„ä¼˜åŒ–

- âœ… æ–°å¢ `ExpressionCompilerExtensions.js` æ¨¡å—åŒ–ç®¡ç†æ‰©å±•å‡½æ•°
- âœ… å‡½æ•°åˆ†ç±»æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•
- âœ… ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œå‚æ•°éªŒè¯
- âœ… å®Œæ•´çš„ç¼“å­˜æ”¯æŒ

### ä»£ç è´¨é‡

- âœ… 540è¡Œé«˜è´¨é‡å®ç°ä»£ç 
- âœ… å®Œæ•´çš„JSDocæ³¨é‡Š
- âœ… è¯¦ç»†çš„å‚æ•°éªŒè¯
- âœ… å‹å¥½çš„é”™è¯¯æç¤º
- âœ… 100%æµ‹è¯•è¦†ç›–

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### MongoDBç‰ˆæœ¬è¦æ±‚

éƒ¨åˆ†æ“ä½œç¬¦éœ€è¦è¾ƒæ–°çš„MongoDBç‰ˆæœ¬ï¼š
- `DATE_ADD`, `DATE_SUBTRACT`, `DATE_DIFF` éœ€è¦ MongoDB 5.0+
- å¤§éƒ¨åˆ†å…¶ä»–æ“ä½œç¬¦æ”¯æŒ MongoDB 3.6+

### å‘åå…¼å®¹

- âœ… 100%å‘åå…¼å®¹
- âœ… æ‰€æœ‰ç°æœ‰APIä¿æŒä¸å˜
- âœ… ç°æœ‰ä»£ç æ— éœ€ä¿®æ”¹
- âœ… å¢é‡å¼åŠŸèƒ½æ·»åŠ 

---

## ğŸ¯ å®é™…åº”ç”¨åœºæ™¯

### è®¢å•ç®¡ç†

```javascript
await collection('orders').aggregate([
  {
    $addFields: {
      deliveryDate: expr('DATE_ADD(orderDate, 7, "day")'),
      processingDays: expr('DATE_DIFF(completedAt, createdAt, "day")'),
      totalAmount: expr('REDUCE(items, 0, (sum, item) => sum + item.price)'),
      status: expr('COND(completedAt, "completed", "pending")')
    }
  }
]);
```

### ç”¨æˆ·åˆ†æ

```javascript
await collection('users').aggregate([
  {
    $addFields: {
      registerDayOfWeek: expr('DAY_OF_WEEK(registeredAt)'),
      activeDays: expr('DATE_DIFF(lastLoginAt, registeredAt, "day")'),
      isActive: expr('TO_BOOL(IF_NULL(lastLoginAt, false))')
    }
  }
]);
```

### æ•°æ®æ¸…æ´—

```javascript
await collection('imports').aggregate([
  {
    $addFields: {
      parsedDate: expr('DATE_FROM_STRING(dateString, "%Y-%m-%d")'),
      price: expr('TO_DOUBLE(priceStr)'),
      quantity: expr('TO_LONG(quantityStr)'),
      reversedTags: expr('REVERSE_ARRAY(tags)')
    }
  }
]);
```

---

## ğŸš€ åç»­è®¡åˆ’

### v1.1.1ï¼ˆçŸ­æœŸï¼‰

- [ ] TypeScriptç±»å‹å®šä¹‰è¡¥å……
- [ ] æ–‡æ¡£ç¤ºä¾‹å®Œå–„
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•

### v1.2.0ï¼ˆä¸­æœŸï¼‰

- [ ] è¡¨è¾¾å¼ç¼–è¯‘æ€§èƒ½ä¼˜åŒ–
- [ ] è‡ªå®šä¹‰å‡½æ•°æ‰©å±•æ”¯æŒ
- [ ] è¡¨è¾¾å¼è°ƒè¯•æ¨¡å¼

### v2.0.0ï¼ˆé•¿æœŸï¼‰

- [ ] MySQLè¡¨è¾¾å¼ç³»ç»Ÿæ”¯æŒ
- [ ] PostgreSQLè¡¨è¾¾å¼ç³»ç»Ÿæ”¯æŒ
- [ ] è·¨æ•°æ®åº“ç»Ÿä¸€è¯­æ³•

---

**å‘å¸ƒæ—¶é—´**: 2026-01-21  
**é‡è¦æ€§**: â­â­â­â­â­ é‡Œç¨‹ç¢‘ç‰ˆæœ¬  
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª  
**å»ºè®®**: ç«‹å³å‡çº§
